[![Jekyll site CI](https://github.com/eclipse-embed-cdt/web-jekyll/workflows/Jekyll%20site%20CI/badge.svg)](https://github.com/eclipse-embed-cdt/web-jekyll/actions?query=workflow%3A%22Jekyll+site+CI%22)

# Maintainer info

TODO: document how to maintain this site and update the Eclipse hosted web.

- https://eclipse-embed-cdt.github.io/
- https://eclipse-embed-cdt.github.io/web-preview/

## Redirect

If pages are moved to a different URL, leave a redirect behind:

```yml
redirect_from:
  - /blog/2022/04/17/xpm-v0-13-0-released/
```

## GitHub Actions

The site is automatically generated by a GitHub Actions CI job.

- https://github.com/eclipse-embed-cdt/web-jekyll/actions?query=workflow%3A%22Jekyll+site+CI%22

Pushing to `master`
generates the main site, pushes to `develop` generates the preview.

## Prerequisites

Note: for more details, see the xPack
[README-MAINTAINER](https://github.com/xpack/web-jekyll/blob/develop/README-MAINTAINER.md)
page.

The site is generated by [Jekyll](https://jekyllrb.com), which is written in
Ruby.

To test locally, install:

- [Ruby](https://www.ruby-lang.org/en/)
- [Bundler](https://bundler.io)

*Note:* the version of bundler included with Ubuntu by default is too old, download and install Ruby and Bundler and do a per-user install.

The Ruby plug-ins are listed in the Gemfile and can be automatically installed
by with `bundle install`.

To generate a local site and start a local server:

```sh
bundle exec jekyll serve --baseurl "" --destination _site_local --trace --draft
```

Add ` --force_polling` to the above if Jekyll is not detecting changes to files while serve is running.

## Quick copy/paste

```sh
bundle exec jekyll serve --trace --safe --baseurl "/web-preview"

bundle exec jekyll serve --trace --safe

bundle exec jekyll build

bundle exec htmlproofer --allow-hash-href --url-swap \^/web-preview/\:/ ./_site_local

bundle exec htmlproofer --allow-hash-href --url-swap \^/web-preview/\:/ --url-ignore /github.com/xpack/xpack.github.io/blob/master/ ./_site_local

bundle exec htmlproofer --allow-hash-href ./_site_local

bundle exec htmlproofer --allow-hash-href --http_status_ignore=429 ./_site_local
```
